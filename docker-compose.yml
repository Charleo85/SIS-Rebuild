models:
    container_name: models
    image: tp33/django
    volumes:
        - ./models/:/app
    ports:
        - "8001:8000"
    external_links:
        - mysql:db
    command: bash -c "python /app/manage.py makemigrations api; python /app/manage.py migrate; python /app/manage.py loaddata /app/data.json; mod_wsgi-express start-server --reload-on-change --working-directory /app /app/models/wsgi.py"
exp:
    container_name: exp
    image: tp33/django
    volumes:
        - ./exp/:/app
    ports:
        - "8002:8000"
    links:
        - models:models-api
    command: bash -c "python /app/manage.py migrate; mod_wsgi-express start-server --reload-on-change --working-directory /app /app/exp/wsgi.py"
web:
    container_name: web
    image: tp33/django
    volumes:
        - ./web/:/app
    ports:
        - "8000:8000"
    links:
        - exp:exp-api
    command: bash -c "python /app/manage.py migrate; mod_wsgi-express start-server --reload-on-change --working-directory /app /app/web/wsgi.py"
